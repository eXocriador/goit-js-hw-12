{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst API_KEY = '47660157-57325717b13f34e4491083279'; \nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const fetchImages = async (query, page = 1, perPage = 15) => {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        page,\n        per_page: perPage,\n        image_type: 'photo',\n      },\n    });\n\n    if (response.data.hits.length === 0) {\n      iziToast.info({\n        title: 'No images found',\n        message: 'Try adjusting your search criteria.',\n      });\n    }\n\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n\n    iziToast.error({\n      title: 'Error',\n      message: 'Unable to fetch images. Please try again later.',\n    });\n\n    throw new Error('Unable to fetch images.');\n  }\n};\n","const gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nexport const renderGallery = (images) => {\n  if (images.length === 0) {\n    showEndMessage();\n    hideLoadMoreButton();\n    return;\n  }\n\n  const markup = images\n    .map(image => {\n      return `\n        <div class=\"gallery-item\">\n          <a href=\"${image.largeImageURL}\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n          </a>\n          <ul class=\"info\">\n            <li class=\"info-item\">\n              <span class=\"info-title\">Likes:</span>\n              <span class=\"info-content\">${image.likes}</span>\n            </li>\n            <li class=\"info-item\">\n              <span class=\"info-title\">Views:</span>\n              <span class=\"info-content\">${image.views}</span>\n            </li>\n            <li class=\"info-item\">\n              <span class=\"info-title\">Comments:</span>\n              <span class=\"info-content\">${image.comments}</span>\n            </li>\n            <li class=\"info-item\">\n              <span class=\"info-title\">Downloads:</span>\n              <span class=\"info-content\">${image.downloads}</span>\n            </li>\n          </ul>\n        </div>`;\n    })\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n};\n\nexport const showLoadMoreButton = () => {\n  loadMoreButton.style.display = 'block';\n};\n\nexport const hideLoadMoreButton = () => {\n  loadMoreButton.style.display = 'none';\n};\n\nexport const showEndMessage = (message) => {\n  const gallery = document.querySelector('.gallery');\n  clearEndMessage(); \n  gallery.insertAdjacentHTML('afterend', `<p class=\"end-message\">${message}</p>`);\n};\n\nexport const clearEndMessage = () => {\n  const endMessage = document.querySelector('.end-message');\n  if (endMessage) {\n    endMessage.remove();\n  }\n};\n\n\nexport const clearGallery = () => {\n  gallery.innerHTML = '';\n};\n\nexport const showLoader = () => {\n  if (!loader.classList.contains('show')) {\n    loader.classList.add('show');\n  }\n};\n\nexport const hideLoader = () => {\n  if (loader.classList.contains('show')) {\n    loader.classList.remove('show');\n  }\n};\n","import { fetchImages } from './js/pixabay-api';\nimport {\n  renderGallery,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  showEndMessage,\n  clearEndMessage,\n  clearGallery,\n  showLoader,\n  hideLoader,\n} from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet page = 1;\nlet query = '';\nlet totalHits = 0;\n\nconst form = document.querySelector('.search-form');\nconst loadMoreButton = document.querySelector('.load-more');\n\nform.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  query = event.target.elements.query.value.trim();\n\n  if (query === '') return;\n\n  page = 1;\n  clearGallery();\n  hideLoadMoreButton(); \n  await loadImages(query, page);\n});\n\n\nloadMoreButton.addEventListener('click', async () => {\n  page += 1;\n  await loadImages(query, page);\n});\n\nconst loadImages = async (query, page) => {\n  try {\n    showLoader();\n    hideLoadMoreButton();\n\n    const data = await fetchImages(query, page);\n    const { hits, totalHits: total } = data;\n\n    clearEndMessage();\n\n    if (hits.length === 0 && page === 1) {\n      showEndMessage('No images found. Try adjusting your search criteria.');\n      \n      return;\n    }\n\n    renderGallery(hits);\n    lightbox.refresh();\n    totalHits = total;\n\n    if (page * 15 >= totalHits) {\n      hideLoadMoreButton();\n      showEndMessage(\"We're sorry, but you've reached the end of search results.\");\n    } else {\n      showLoadMoreButton();\n    }\n\n    if (page > 1) {\n      smoothScroll();\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong! Please try again later.',\n    });\n    console.error(error);\n  } finally {\n    hideLoader();\n  }\n};\n\n\nconst smoothScroll = () => {\n  const galleryItems = document.querySelectorAll('.gallery-item');\n  const lastItem = galleryItems[galleryItems.length - 1];\n  const { height } = lastItem.getBoundingClientRect();\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n};\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","response","axios","iziToast","error","gallery","loadMoreButton","loader","renderGallery","images","showEndMessage","hideLoadMoreButton","markup","image","showLoadMoreButton","message","clearEndMessage","endMessage","clearGallery","showLoader","hideLoader","lightbox","SimpleLightbox","totalHits","form","event","loadImages","data","hits","total","smoothScroll","galleryItems","lastItem","height"],"mappings":"owBAIA,MAAMA,EAAU,qCACVC,EAAW,2BAEJC,EAAc,MAAOC,EAAOC,EAAO,EAAGC,EAAU,KAAO,CAClE,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAAIN,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,KAAAC,EACA,SAAUC,EACV,WAAY,OACb,CACP,CAAK,EAED,OAAIC,EAAS,KAAK,KAAK,SAAW,GAChCE,EAAS,KAAK,CACZ,MAAO,kBACP,QAAS,qCACjB,CAAO,EAGIF,EAAS,IACjB,OAAQG,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EAE7CD,EAAS,MAAM,CACb,MAAO,QACP,QAAS,iDACf,CAAK,EAEK,IAAI,MAAM,yBAAyB,CAC1C,CACH,ECrCME,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAiB,SAAS,cAAc,YAAY,EACpDC,EAAS,SAAS,cAAc,SAAS,EAElCC,EAAiBC,GAAW,CACvC,GAAIA,EAAO,SAAW,EAAG,CACvBC,IACAC,IACA,MACD,CAED,MAAMC,EAASH,EACZ,IAAII,GACI;AAAA;AAAA,qBAEQA,EAAM,aAAa;AAAA,wBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,2CAKnBA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,2CAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,2CAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,2CAIdA,EAAM,SAAS;AAAA;AAAA;AAAA,eAIrD,EACA,KAAK,EAAE,EACVR,EAAQ,mBAAmB,YAAaO,CAAM,CAChD,EAEaE,EAAqB,IAAM,CACtCR,EAAe,MAAM,QAAU,OACjC,EAEaK,EAAqB,IAAM,CACtCL,EAAe,MAAM,QAAU,MACjC,EAEaI,EAAkBK,GAAY,CACzC,MAAMV,EAAU,SAAS,cAAc,UAAU,EACjDW,IACAX,EAAQ,mBAAmB,WAAY,0BAA0BU,CAAO,MAAM,CAChF,EAEaC,EAAkB,IAAM,CACnC,MAAMC,EAAa,SAAS,cAAc,cAAc,EACpDA,GACFA,EAAW,OAAM,CAErB,EAGaC,EAAe,IAAM,CAChCb,EAAQ,UAAY,EACtB,EAEac,EAAa,IAAM,CACzBZ,EAAO,UAAU,SAAS,MAAM,GACnCA,EAAO,UAAU,IAAI,MAAM,CAE/B,EAEaa,EAAa,IAAM,CAC1Bb,EAAO,UAAU,SAAS,MAAM,GAClCA,EAAO,UAAU,OAAO,MAAM,CAElC,EC9DMc,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAED,IAAIvB,EAAO,EACPD,EAAQ,GACRyB,EAAY,EAEhB,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5ClB,EAAiB,SAAS,cAAc,YAAY,EAE1DkB,EAAK,iBAAiB,SAAU,MAAOC,GAAU,CAC/CA,EAAM,eAAc,EACpB3B,EAAQ2B,EAAM,OAAO,SAAS,MAAM,MAAM,OAEtC3B,IAAU,KAEdC,EAAO,EACPmB,IACAP,IACA,MAAMe,EAAW5B,EAAOC,CAAI,EAC9B,CAAC,EAGDO,EAAe,iBAAiB,QAAS,SAAY,CACnDP,GAAQ,EACR,MAAM2B,EAAW5B,EAAOC,CAAI,CAC9B,CAAC,EAED,MAAM2B,EAAa,MAAO5B,EAAOC,IAAS,CACxC,GAAI,CACFoB,IACAR,IAEA,MAAMgB,EAAO,MAAM9B,EAAYC,EAAOC,CAAI,EACpC,CAAE,KAAA6B,EAAM,UAAWC,CAAK,EAAKF,EAInC,GAFAX,IAEIY,EAAK,SAAW,GAAK7B,IAAS,EAAG,CACnCW,EAAe,sDAAsD,EAErE,MACD,CAEDF,EAAcoB,CAAI,EAClBP,EAAS,QAAO,EAChBE,EAAYM,EAER9B,EAAO,IAAMwB,GACfZ,IACAD,EAAe,4DAA4D,GAE3EI,IAGEf,EAAO,GACT+B,GAEH,OAAQ1B,EAAO,CACdD,EAAS,MAAM,CACb,MAAO,QACP,QAAS,+CACf,CAAK,EACD,QAAQ,MAAMC,CAAK,CACvB,QAAY,CACRgB,GACD,CACH,EAGMU,EAAe,IAAM,CACzB,MAAMC,EAAe,SAAS,iBAAiB,eAAe,EACxDC,EAAWD,EAAaA,EAAa,OAAS,CAAC,EAC/C,CAAE,OAAAE,CAAM,EAAKD,EAAS,sBAAqB,EACjD,OAAO,SAAS,CACd,IAAKC,EAAS,EACd,SAAU,QACd,CAAG,CACH"}