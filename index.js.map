{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '47660157-57325717b13f34e4491083279'; \nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const fetchImages = async (query, page = 1, perPage = 15) => {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        page,\n        per_page: perPage,\n        image_type: 'photo',\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw new Error('Unable to fetch images.');\n  }\n};\n","export const renderGallery = (images) => {\n  const gallery = document.querySelector('.gallery');\n  const markup = images\n    .map(image => {\n      return `\n        <div class=\"gallery-item\">\n          <a href=\"${image.largeImageURL}\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n          </a>\n          <ul class=\"info\">\n            <li class=\"info-item\">\n              <span class=\"info-title\">Likes:</span>\n              <span class=\"info-content\">${image.likes}</span>\n            </li>\n            <li class=\"info-item\">\n              <span class=\"info-title\">Views:</span>\n              <span class=\"info-content\">${image.views}</span>\n            </li>\n            <li class=\"info-item\">\n              <span class=\"info-title\">Comments:</span>\n              <span class=\"info-content\">${image.comments}</span>\n            </li>\n            <li class=\"info-item\">\n              <span class=\"info-title\">Downloads:</span>\n              <span class=\"info-content\">${image.downloads}</span>\n            </li>\n          </ul>\n        </div>`;\n    })\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n};\n\nexport const showLoadMoreButton = () => {\n  const loadMoreButton = document.querySelector('.load-more');\n  loadMoreButton.style.display = 'block';\n};\n\nexport const hideLoadMoreButton = () => {\n  const loadMoreButton = document.querySelector('.load-more');\n  loadMoreButton.style.display = 'none';\n};\n\nexport const showEndMessage = () => {\n  const gallery = document.querySelector('.gallery');\n  gallery.insertAdjacentHTML('beforeend', `<p class=\"end-message\">We're sorry, but you've reached the end of search results.</p>`);\n};\n\nexport const clearGallery = () => {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n};\n","import { fetchImages } from './js/pixabay-api';\nimport { renderGallery, showLoadMoreButton, hideLoadMoreButton, showEndMessage, clearGallery } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlightbox.refresh();\n\nlet page = 1;\nlet query = '';\nlet totalHits = 0;\n\nconst form = document.querySelector('.search-form');\nconst loadMoreButton = document.querySelector('.load-more');\n\nform.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  query = event.target.elements.query.value.trim();\n\n  if (query === '') return;\n\n  page = 1;\n  clearGallery();\n  loadImages(query, page);\n});\n\nloadMoreButton.addEventListener('click', () => {\n  page += 1;\n  loadImages(query, page);\n});\n\nconst loadImages = async (query, page) => {\n  try {\n    const data = await fetchImages(query, page);\n    const { hits, totalHits: total } = data;\n\n    if (hits.length === 0) {\n      showEndMessage();\n      hideLoadMoreButton();\n      return;\n    }\n\n    renderGallery(hits);\n    totalHits = total;\n\n    if (page * 15 >= totalHits) {\n      hideLoadMoreButton();\n    } else {\n      showLoadMoreButton();\n    }\n\n    smoothScroll();\n  } catch (error) {\n    console.error(error);\n  }\n};\n\nconst smoothScroll = () => {\n  const galleryItems = document.querySelectorAll('.gallery-item');\n  const lastItem = galleryItems[galleryItems.length - 1];\n  const { height } = lastItem.getBoundingClientRect();\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n};\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","error","renderGallery","images","gallery","markup","image","showLoadMoreButton","loadMoreButton","hideLoadMoreButton","showEndMessage","clearGallery","lightbox","SimpleLightbox","totalHits","form","event","loadImages","data","hits","total","smoothScroll","galleryItems","lastItem","height"],"mappings":"6vBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEJC,EAAc,MAAOC,EAAOC,EAAO,EAAGC,EAAU,KAAO,CAClE,GAAI,CAUF,OATiB,MAAMC,EAAM,IAAIL,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,KAAAC,EACA,SAAUC,EACV,WAAY,OACb,CACP,CAAK,GACe,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvC,IAAI,MAAM,yBAAyB,CAC1C,CACH,ECrBaC,EAAiBC,GAAW,CACvC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EACZ,IAAIG,GACI;AAAA;AAAA,qBAEQA,EAAM,aAAa;AAAA,wBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,2CAKnBA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,2CAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,2CAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,2CAIdA,EAAM,SAAS;AAAA;AAAA;AAAA,eAIrD,EACA,KAAK,EAAE,EACVF,EAAQ,mBAAmB,YAAaC,CAAM,CAChD,EAEaE,EAAqB,IAAM,CACtC,MAAMC,EAAiB,SAAS,cAAc,YAAY,EAC1DA,EAAe,MAAM,QAAU,OACjC,EAEaC,EAAqB,IAAM,CACtC,MAAMD,EAAiB,SAAS,cAAc,YAAY,EAC1DA,EAAe,MAAM,QAAU,MACjC,EAEaE,EAAiB,IAAM,CAClB,SAAS,cAAc,UAAU,EACzC,mBAAmB,YAAa,uFAAuF,CACjI,EAEaC,EAAe,IAAM,CAChC,MAAMP,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,UAAY,EACtB,EC9CMQ,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAEDD,EAAS,QAAO,EAEhB,IAAId,EAAO,EACPD,EAAQ,GACRiB,EAAY,EAEhB,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CP,EAAiB,SAAS,cAAc,YAAY,EAE1DO,EAAK,iBAAiB,SAAU,MAAOC,GAAU,CAC/CA,EAAM,eAAc,EACpBnB,EAAQmB,EAAM,OAAO,SAAS,MAAM,MAAM,OAEtCnB,IAAU,KAEdC,EAAO,EACPa,IACAM,EAAWpB,EAAOC,CAAI,EACxB,CAAC,EAEDU,EAAe,iBAAiB,QAAS,IAAM,CAC7CV,GAAQ,EACRmB,EAAWpB,EAAOC,CAAI,CACxB,CAAC,EAED,MAAMmB,EAAa,MAAOpB,EAAOC,IAAS,CACxC,GAAI,CACF,MAAMoB,EAAO,MAAMtB,EAAYC,EAAOC,CAAI,EACpC,CAAE,KAAAqB,EAAM,UAAWC,CAAK,EAAKF,EAEnC,GAAIC,EAAK,SAAW,EAAG,CACrBT,IACAD,IACA,MACD,CAEDP,EAAciB,CAAI,EAClBL,EAAYM,EAERtB,EAAO,IAAMgB,EACfL,IAEAF,IAGFc,GACD,OAAQpB,EAAO,CACd,QAAQ,MAAMA,CAAK,CACpB,CACH,EAEMoB,EAAe,IAAM,CACzB,MAAMC,EAAe,SAAS,iBAAiB,eAAe,EACxDC,EAAWD,EAAaA,EAAa,OAAS,CAAC,EAC/C,CAAE,OAAAE,CAAM,EAAKD,EAAS,sBAAqB,EACjD,OAAO,SAAS,CACd,IAAKC,EAAS,EACd,SAAU,QACd,CAAG,CACH"}